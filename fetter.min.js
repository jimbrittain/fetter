"use strict";function unfetter(a,b,c,d){var e=unfetter.prototype.eventChooser(a,b),f=unfetter.prototype.functionChooser(a);if(null===f)return!1;var g=!1;if(d=void 0===d||d!==!1,null!==c&&"function"==typeof c){c=(new FetterMain).findListener(c,a,b);try{g=f.call?f.call(a,e,c,d):f(e,c,d)}catch(b){g=!(!a.detachEvent||a.detachEvent!==f)&&a.detachEvent(e,c)}}else try{g=f.call?f.call(a,e,d):a.fun(e,d)}catch(b){g=!(!a.detachEvent||f!==a.detachEvent)&&a.detachEvent(e)}(new FetterMain).removeListenerFromIndex((new FetterMain).findListenerIndex(c,a,b))}function fetter(a,b,c,d,e,f){var g=fetter.prototype,h=null,i=null,j=null,k=!0,l=!1,m=null;if(null===a||"object"!=typeof a||isHTMLElement(a)||a===window||a===document?(h=isHTMLElement(a)||a===window||a===document?a:null,i=b,j=null!==c&&"function"==typeof c?c:null,k=d!==!1,l=g.returnDoneNumber(e)):(h="_element"in a&&(isHTMLElement(a._element)||a._element===window||a._element===document)?a._element:null,i="_event"in a?a._event:null,j="_function"in a&&"function"==typeof a._function?a._function:null,k=!("_bubble"in a&&a._bubble===!1),l="_done"in a?g.returnDoneNumber(a._done):1,m="_done_function"in a&&"function"==typeof a._done_function?a._done_function:null),null!==h&&null!==i&&null!==j){j=(new FetterMain).findListener(j,h,i),i=i.split(" ");for(var n=0,o=0;o<i.length;o+=1){var p=null;if(2!==l&&3!==l||(null!==m?m()?j():p=g.eventChooser(h,i[o]):"load"===i[o]&&h===window?g.windowOpened()?j():p=g.eventChooser(h,i[o]):"DOMContentLoaded"===i[o]&&h===document&&(g.documentReady()?j():p=g.eventChooser(h,i[o]))),1!==l&&3!==l||null!==p||(p=g.eventChooser(h,i[o])),null!==p)try{var q=g.functionChooser(h);null!==q&&(q.call?q.call(h,p,j,k):q(h,p,j,k),n+=1)}catch(a){h.attachEvent&&q===h.attachEvent&&h.attachEvent(p,j,k)}}return n===i.length}return!1}function FetterMain(){return FetterMain.prototype.singletonInstance?FetterMain.prototype.singletonInstance:(FetterMain.prototype.singletonInstance=this,this.fetter_array=[],void(this.listener_array=[]))}function FetterDefinition(){this.element=null,this.event_array=null}function FetterListener(a,b,c){var d=this;this._function="function"==typeof a?a:function(){},this._element=null!==b?b:-1,this._event=null!==c?c:-1,this._listener=function(a){return d._function(a)}}function FetterEvent(){this._element=null,this._event=null,this._bubble=!0,this._function_arr=null}unfetter.prototype.eventChooser=function(a,b){return"removeEventListener"in a?b:"detachEvent"in a||"on"+b in a?"on"+b:null},unfetter.prototype.functionChooser=function(a){return"removeEventListener"in a?a.removeEventListener:"detachEvent"in a?a.detachEvent:"onload"in a?(new FetterMain).findElement(a).remove:null},fetter.prototype.eventChooser=function(a,b){return"addEventListener"in a?b:"attachEvent"in a||"on"+b in a?"on"+b:null},fetter.prototype.functionChooser=function(a){return a.addEventListener?a.addEventListener:a.attachEvent?a.attachEvent:a.onload?(new FetterMain).findElement(a).set:null},fetter.prototype.documentReadyConfirmed=function(){fetter.prototype._documentready=!0},fetter.prototype.windowLoadConfirmed=function(){fetter.prototype._windowloaded=!0},fetter.prototype.returnDoneNumber=function(a){return a="both"===a?3:a,a="after"===a?2:a,a=2===a||3===a?a:1},fetter.prototype.windowOpened=function(){var a=fetter.prototype;if(a._windowloaded)return a._windowloaded;var b=!1;if(!document.readyState||"complete"!==document.readyState&&"loaded"!==document.readyState?"loaded"in window&&(b=window.loaded):b=!0,b)a._windowloaded=!0;else{var c=a.functionChooser(window);null!==c&&c("load",a.windowLoadConfirmed,!0)}return b},fetter.prototype.documentReady=function(){var a=fetter.prototype,b=null;if(a._documentready)return fetter.prototype._documentready;var c=!1;if(document.attachEvent&&document.documentElement)try{document.documentElement.doScroll("left"),c=!0}catch(a){}else("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState||document.attachEvent&&"loading"!==document.readyState)&&(c=!0);return c?(fetter.prototype._documentready=!0,!0):(b=a.functionChooser(document),null!==b&&b("DOMContentLoaded",a.documentReadyConfirmed,!0),b=a.functionChooser(window),null!==b&&b("load",a.documentReadyConfirmed,!0),!1)},FetterMain.prototype.findListenerIndex=function(a,b,c){var d=-1,e=0,f=0;if("function"==typeof a){for(e=0,f=this.listener_array.length;e<f;e+=1)if(this.listener_array[e]._function===a){d=e;break}if(d===-1){var g=this.listener_array.length;for(e=0;e<g;e+=1)if(this.listener_array[e]._function.toString()===a.toString()&&this.listener_array[e]._element===b&&this.listener_array[e]._event===c){d=e;break}}return d}return void(new IMDebugger).pass("Fetter must be supplied with a function")},FetterMain.prototype.removeListenerFromIndex=function(a){a>-1&&a<this.listener_array.length&&this.listener_array.splice(a,1)},FetterMain.prototype.findListener=function(a,b,c){var d=this.findListenerIndex(a,b,c);return d===-1?(this.listener_array.push(new FetterListener(a,b,c)),this.listener_array[this.listener_array.length-1]._listener):this.listener_array[d]._listener},FetterMain.prototype.findElementNumber=function(a){for(var b=-1,c=0,d=this.fetter_array.length;c<d;c+=1)if(this.fetter_array[b].element===a){b=c;break}return b},FetterMain.prototype.findElement=function(a){var b=this.findElementNumber(a);return b===-1&&(b=this.fetter_array.length,this.fetter_array.push(new FetterDefinition(a))),this.fetter_array[b]},FetterMain.prototype.isElement=function(a){var b=this.findElementNumber(a);return b!==-1},FetterDefinition.prototype.init=function(a){this.element=a,this.event_array=[]},FetterDefinition.prototype.returnEventObject=function(a){for(var b=!1,c=0,d=this.event_array.length;c<d;c+=1)if(this.event_array[c]._event===a)return b=this.event_array[c],this.event_array[c];return b},FetterDefinition.prototype.sendToTheFront=function(a,b){var c=this.returnEventObject(this.returnEvent(a));if(c.functionExists(b)){var d=c.findFunctionNumber(b),e=c._function_arr.splice(d,1);c._function_arr.unshift(e)}},FetterDefinition.prototype.sendToTheBack=function(a,b){var c=this.returnEventObject(this.returnEvent(a));if(c.functionExists(b)){var d=c.findFunctionNumber(b),e=c._function_arr.splice(d,1);c._function_arr.push(e)}},FetterDefinition.prototype.set=function(a,b,c){var d=this.returnEventObject(this.returnEvent(a));if(d instanceof FetterEvent)return!d.functionExists(b)&&(d._function_arr.push(b),!0)},FetterDefinition.prototype.remove=function(a,b){var c=this.returnEventObject(this.returnEvent(a));if(c instanceof FetterEvent){if(c.functionExists(b)){var d=c.findFunctionNumber(b);return this.eveObj._function_arr.splice(d,1),!0}return!1}return!1},FetterEvent.prototype.process=function(a){for(var b=0,c=this._function_arr.length;b<c;b+=1)"function"==typeof this._function_arr[b]&&this._function_arr[b](a)},FetterEvent.prototype.functionExists=function(a){var b=this.findFunctionNumber(a);return b!==-1},FetterEvent.prototype.findFunctionNumber=function(a){for(var b=-1,c=0,d=this._function_arr.length;c<d;c+=1)if(this._function_arr[c]===a){b=c;break}return b},FetterEvent.prototype.findFunction=function(a){var b=this.findFunctionNumber(a);return b!==-1&&this._function_arr[b]};